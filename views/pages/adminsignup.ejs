 
 <!DOCTYPE html>
 <html>
     <head>
          <%- include('../partials/head.ejs') %>   
          
          <meta property="og:title" content="Join Us: Create Your Admin Account Today">

          <title>Admin signup</title> 
          <style>
        
        .errlogin{
            font-family:'Poppins', sans-serif;  
            color:black;
          }  
  
          #adlogmein:hover{
            font-size:18px;   
          } 

          .loginf{
             min-width:100px;
             margin-left:20px;
             margin-right:20px;
             padding-left:20px;
             padding-right:20px;
             margin-top:40px;    
          }   

          .loginf .forpc{
             width:60%; 
             color:#212121;
             text-align:center;
             border-radius:50px; 
          }    

          .loginf .forpc i{ 
            font-weight:bold;
             font-size:70px; 
             margin-top:60px;
          }
          
          
          .loginf .secondandr{
              width:100%; 
              text-align:center;
          }    

          .loginf .secondandr i{
              font-size:35px;
          } 

          .loginf .secondandr p{
             margin-top:10px;
             font-size:20px;
             margin-bottom:7px;
          }
          
          .loginf .secondandr input{
             width:100%;
             border:1px solid grey;
             margin-bottom:10px;
             padding:13px;
          } 
 
          .loginf .secondandr button{
               padding:15px;
               border:none;
               border-radius:5px; 
               color:white;
               background-color:#008080;
               margin-bottom:13px;
               width:100%;
          } 
      
           
          @media only screen and (min-width:601px) {
               .loginf{
                display:flex;
                justify-content:space-between; 
                margin-right:40px;
               }  
                
               .secondandr i{
                     display:none;
               }  
          }

          @media only screen and (max-width:600px) {
               .forpc{
                 display:none;
               }    
 
          }
   
        </style>
     </head>
 
      <body>  
          
          
        <%- include('../partials/topbar.ejs') %>    

           <!-- Page Header Start -->
    <div class="container-fluid mb-5 headerimg">
        <div class="d-flex flex-column align-items-center justify-content-center" style="min-height: 300px">
            <h1 class="font-weight-semi-bold text-uppercase mb-3" style="color:white">ADMIN REGISTRATION</h1>
            <div class="d-inline-flex">
                <p class="m-0"><a style="color:#fff; font-weight:bold; font-size:18px;" href="/">Home</a></p>
                <p  class="m-0 px-2">-</p>
                <p style="color:white; font-size:18px;" class="m-0">Admin Signup</p>
            </div>
        </div>
    </div>
    <!-- Page Header End -->

        <div class="loginf">   
            
            <div class="forpc"> 
                <i class="fa fa-user"></i> 
              </div>  

              <div class="secondandr">  
            <form id="adreggo">   
                  
                    <p class="bigg"> Register </p>  
              <input id="adregname" type="text" placeholder="Preferred username" required>  
              <input id="adregem" type="email" placeholder="Email" required>   
              <input id="adsignpass" type="password" placeholder="Preferred Password" required>
                   <p id="errsignup"></p>
               <input id="addsame" type="password" placeholder="confirm Password" required>
               <p id="twins"></p> 
              <input id="adfirstname" type="text" placeholder="First name" required> 
              <input id="adlastname" type="text" placeholder="Last name" required>
              <p id="lgr"></p> 
              <button id='mup'>Register</button> 
              <div class="forgotandcreate"> 
                <p style="cursor:pointer" id="adlogmein">Already have an account?</p> 
                </div>  
   </div>
         </div>    
        </form> 
         <%- include('../partials/footer.ejs') %>   

         <script>

             
       
           
                            ()=>{
                    var errsignup = document.getElementById('errsignup');  
                    var twins = document.getElementById('twins');  
                    var mup = document.getElementById('mup');
                    var adsignpass = document.getElementById('adsignpass');     
                    var adregname = document.getElementById('adregname');  
                    var adregem = document.getElementById('adregem');  
                    var adfirstname = document.getElementById('adfirstname'); 
                    var adlastname = document.getElementById('adlastname');              
                    var addsame = document.getElementById('addsame');  
                    var loginerr = document.getElementById('lgr');
                            };
 
                 adsignpass.onkeyup = function() {
                    
                if(adsignpass.value.search(/[a-z]/) < 0){
                    errsignup.innerHTML = 'incomplete!, password must contain lowercase character';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                }   

                

                  
               else if(adsignpass.value.search(/[A-Z]/) < 0){
                    errsignup.innerHTML = 'incomplete!, password must contain uppercase character';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                }     

                else if(adsignpass.value.search(/[0-9]/) < 0){
                    errsignup.innerHTML = 'invalid!, password must contain number';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                }  

                else if(adsignpass.value.search(/[!@#^&*$Â£%]/) < 0){
                    errsignup.innerHTML = 'password must contain at least one symbol';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontSize = '16px';
                    errsignup.style.fontFamily = 'helvetica';
                } 
 


                 
                else if(adsignpass.value.length < 8){
                    errsignup.innerHTML = 'oops!, password is too short and weak';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                }  

                else if(adsignpass.value.length > 24){
                    errsignup.innerHTML = 'oops!, password is too long';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                } 



                 else{
                    errsignup.innerHTML = 'Password is strong';
                    errsignup.style.color = 'green';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = false;
                    mup.style.opacity = '2';
                    errsignup.style.fontFamily = 'helvetica';
                 } 
 
                 };     


                 addsame.onkeyup = function() {
                    errsignup.innerHTML = '';
                    if(adsignpass.value !== addsame.value){
                       twins.innerHTML = 'Fields must be of same value'; 
                    twins.style.color = 'red';
                    twins.style.textAlign = 'center';
                    twins.style.marginTop = '7px';
                    twins.style.fontWeight = 'bold';
                  twins.style.fontSize = '16px';
                  mup.disabled = true;
                    mup.style.opacity = '0.2';
                    twins.style.fontFamily = 'helvetica';
                    }  

                    else{
 
                       twins.innerHTML = 'perfect';
                    twins.style.color = 'green';
                    twins.style.textAlign = 'center';
                    twins.style.marginTop = '7px';
                    twins.style.fontWeight = 'bold';
                  twins.style.fontSize = '16px';
                  mup.disabled = false;
                    mup.style.opacity = '2';
                    twins.style.fontFamily = 'helvetica';
                        
                    } 

                 } 



                 var adreggo = document.getElementById('adreggo');
                 adreggo.addEventListener('submit', async (r)=>{
                    r.preventDefault(); 
                    twins.innerHTML = '';
                    mup.innerHTML = 'Registering..';
 

                    const datareg = { 
                          reguser : adregname.value,
                          regemail : adregem.value, 
                          regpass : adsignpass.value,  
                         firstname: adfirstname.value,
                          lastname : adlastname.value, 
                     }; 
                 
                     try{
                const response = await fetch('/postingadregistration', {
                     
                     method :'post',
                     body : JSON.stringify(datareg),
                     headers:{
                                    'Content-Type':'application/json',
                                    Accept:'application/json',
                             }
         });  

             if(!response.ok){
                throw response;
             }   
         
         setTimeout(() => {
            mup.innerHTML = 'Register successful..'; 
            }, 3000);  

            setTimeout(() => { 
             window.location.href = '/admin-control-login';
            }, 5000);

        }    

          catch(err) {
            var loginerr = document.getElementById('lgr');
               mup.innerHTML = 'Register'; 
                   const erresult = await err.text(); 
                    loginerr.innerHTML = erresult;
                    loginerr.style.color = 'red';
                    loginerr.style.marginTop = '10px';
                    loginerr.style.fontSize = '16px';
                    loginerr.style.fontWeight = 'bold';
                    loginerr.style.fontFamily = 'helvetica';
          }

                 });
        
                 
     var adlogmein = document.getElementById('adlogmein');
     adlogmein.onclick = function() {
           window.location.href = '/admin-control-login';

     }

         </script>
      
      </body>
 </html>  