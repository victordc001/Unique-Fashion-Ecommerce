 
      
<!DOCTYPE html>
<html>
    <head>
         <%- include('../partials/head.ejs') %> 
         <title>signup</title>   
         <meta property="og:title" content="Member Signup: Join Us for Exclusive Benefits">

       
        <style> 
         .errlogin{
          font-family:'Poppins', sans-serif; 
        }  

         
        .loginf{
           min-width:100px;
           margin-left:20px;
           margin-right:20px;
           padding-left:20px;
           padding-right:20px;
           margin-top:40px;    
        }   

        .loginf .forpc{
           width:60%; 
           color:#212121;
           text-align:center;
           border-radius:50px; 
        }    

        .loginf .forpc i{ 
          font-weight:bold;
           font-size:70px; 
           margin-top:60px;
        }
        
        
        .loginf .secondandr{
            width:100%; 
            text-align:center;
        }    

        .loginf .secondandr i{
            font-size:35px;
        } 

        .loginf .secondandr p{
           margin-top:10px;
           font-size:20px;
           margin-bottom:7px;
        }
        
        .loginf .secondandr input{
           width:100%;
           border:1px solid grey;
           margin-bottom:10px;
           padding:13px;
        } 

        .loginf .secondandr button{
             padding:15px;
             border:none;
             border-radius:5px; 
             color:white;
             background-color:#008080;
             margin-bottom:13px;
             width:100%;
        } 
    
         
        @media only screen and (min-width:601px) {
             .loginf{
              display:flex;
              justify-content:space-between; 
              margin-right:40px;
             }    

          
              
             .secondandr i{
                   display:none;
             }
        }

        @media only screen and (max-width:600px) {
             .forpc{
               display:none;
             }  

        } 
      </style>
    </head>

     <body> 
  
           <!-- Topbar Start -->
           <%- include('../partials/topbar.ejs') %>  
  <!-- Topbar End --> 

       <!-- Page Header Start -->
    <div class="container-fluid mb-5 headerimg">
        <div class="d-flex flex-column align-items-center justify-content-center" style="min-height: 300px">
            <h1 class="font-weight-semi-bold text-uppercase mb-3" style="color:white">BECOME A MEMBER</h1>
            <div class="d-inline-flex">
                <p class="m-0"><a style="color:#fff; font-weight:bold; font-size:18px;" href="/">Home</a></p>
                <p  class="m-0 px-2">-</p>
                <p style="color:white; font-size:18px;" class="m-0">Sign up</p>
            </div>
        </div>
    </div>
    <!-- Page Header End -->


  <form id="reggo">   
          
          <div class="loginf">   

            <div class="forpc"> 
              <i class="fa fa-user"></i> 
            </div>  

            <div class="secondandr">  
              <input id="regname" type="text" placeholder="Preferred username" required>  
              <input id="regem" type="email" placeholder="Email" required>   
              <input id="firstname" type="text" placeholder="First name" required> 
              <input id="lastname" type="text" placeholder="Last name" required>
              <input id="signpass" type="password" placeholder="Preferred Password" required>
                   <p id="errsignup"></p>
               <input id="dsame" type="password" placeholder="confirm Password" required>
               <p id="twins"></p>  
              <p id="lgr"></p> 
              <button id="mup">Register</button> 
              <div class="forgotandcreate"> 
                <a style="color:black" href="login">Already have an account?</a> 
                </div> 
               

              <div class="agree-terms">
                <input type="checkbox" id="agreeTerms" required>
                <label for="agreeTerms">By registering , you agree to <a style='color:black' href="/terms">our terms and policies</a></label>
            </div>

         </div>  
         </div>  
        </form> 
   
         <%- include('../partials/footer.ejs') %> 

         <script>

             
       
           
                            ()=>{
                    var errsignup = document.getElementById('errsignup');  
                    var twins = document.getElementById('twins');  
                    var mup = document.getElementById('mup');
                    var signpass = document.getElementById('signpass');     
                    var regname = document.getElementById('regname');  
                    var regem = document.getElementById('regem');  
                    var firstname = document.getElementById('firstname'); 
                    var lastname = document.getElementById('lastname');              
                    var dsame = document.getElementById('dsame');  
                    var loginerr = document.getElementById('lgr');
                    mup.style.opacity = '0.2';
                            };
 
                 signpass.onkeyup = function() {
                    
                if(signpass.value.search(/[a-z]/) < 0){
                    errsignup.innerHTML = 'incomplete!, password must contain lowercase character';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                }   

                

                  
               else if(signpass.value.search(/[A-Z]/) < 0){
                    errsignup.innerHTML = 'incomplete!, password must contain uppercase character';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                }     

                else if(signpass.value.search(/[0-9]/) < 0){
                    errsignup.innerHTML = 'invalid!, password must contain number';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                }  

                else if(signpass.value.search(/[!@#^&*$Â£%]/) < 0){
                    errsignup.innerHTML = 'password must contain at least one symbol';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontSize = '16px';
                    errsignup.style.fontFamily = 'helvetica';
                } 
 


                 
                else if(signpass.value.length < 8){
                    errsignup.innerHTML = 'oops!, password is too short and weak';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                }  

                else if(signpass.value.length > 24){
                    errsignup.innerHTML = 'oops!, password is too long';
                    errsignup.style.color = 'red';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = true;
                    mup.style.opacity = '0.2';
                    errsignup.style.fontFamily = 'helvetica';
                } 



                 else{
                    errsignup.innerHTML = 'Password is strong';
                    errsignup.style.color = '#212121';
                    errsignup.style.textAlign = 'center';
                    errsignup.style.marginTop = '7px';
                    errsignup.style.fontWeight = 'bold';
                    errsignup.style.fontSize = '16px';
                    mup.disabled = false;
                    mup.style.opacity = '2';
                    errsignup.style.fontFamily = 'helvetica';
                 } 
 
                 };     


                 dsame.onkeyup = function() {
                    errsignup.innerHTML = '';
                    if(signpass.value !== dsame.value){
                       twins.innerHTML = 'Fields must be of same value'; 
                    twins.style.color = 'red';
                    twins.style.textAlign = 'center';
                    twins.style.marginTop = '7px';
                    twins.style.fontWeight = 'bold';
                  twins.style.fontSize = '16px';
                  mup.disabled = true;
                    mup.style.opacity = '0.2';
                    twins.style.fontFamily = 'helvetica';
                    }  

                    else{
 
                       twins.innerHTML = 'perfect';
                    twins.style.color = '#212121';
                    twins.style.textAlign = 'center';
                    twins.style.marginTop = '7px';
                    twins.style.fontWeight = 'bold';
                  twins.style.fontSize = '16px';
                  mup.disabled = false;
                    mup.style.opacity = '2';
                    twins.style.fontFamily = 'helvetica';
                        
                    } 

                 } 



                 var reggo = document.getElementById('reggo');
                 reggo.addEventListener('submit', async (r)=>{
                    r.preventDefault(); 
                    twins.innerHTML = '';
                    mup.innerHTML = 'Registering..';
                    mup.style.opacity = '0.855';
 

                    const datareg = { 
                          reguser : regname.value,
                          regemail : regem.value, 
                          regpass : signpass.value,  
                         firstname: firstname.value,
                          lastname : lastname.value, 
                     }; 
                 
                     try{
                const response = await fetch('/postingregistration', {
                     
                     method :'post',
                     body : JSON.stringify(datareg),
                     headers:{
                                    'Content-Type':'application/json',
                                    Accept:'application/json',
                             }
         });  

             if(!response.ok){
                throw response;
             }   
             mup.style.opacity = '1';
         
         setTimeout(() => { 
            loginerr.style.color = '';
            mup.innerHTML = 'Register successful..';  
            }, 3000);  

            setTimeout(() => {  
                window.location.assign(`/verification/${regem.value}`); 
            }, 5000);

        }    

          catch(err) {
            var loginerr = document.getElementById('lgr');
               mup.innerHTML = 'Register'; 
                   const erresult = await err.text(); 
                    loginerr.innerHTML = erresult;
                    loginerr.style.color = 'red';
                    loginerr.style.marginTop = '10px';
                    loginerr.style.fontSize = '16px';
                    loginerr.style.fontWeight = 'bold';
                    loginerr.style.fontFamily = 'helvetica';
          }

                 });
        
                 
     var logmein = document.getElementById('logmein');
     logmein.onclick = function() {
           window.location.href = '/login';

     }

         </script>
     </body>
</html>